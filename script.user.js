// ==UserScript==
// @name         AutoPilot
// @namespace    http://tampermonkey.net/
// @version      2.6
// @description  Автоимпорт карточек
// @author       KeepDistance
// @match        https://sellerpilot.ru/catalog-v2*
// @updateURL    https://github.com/KeepDistanceWW/AutoPilot/raw/refs/heads/main/script.user.js
// @downloadURL  https://github.com/KeepDistanceWW/AutoPilot/raw/refs/heads/main/script.user.js
// @grant        none
// ==/UserScript==


(function(_0x17399c,_0x29206a){const _0x2cea34=_0x20f5,_0x3516dd=_0x17399c();while(!![]){try{const _0x49d2e7=parseInt(_0x2cea34(0xf0))/0x1*(-parseInt(_0x2cea34(0x147))/0x2)+parseInt(_0x2cea34(0x11d))/0x3*(parseInt(_0x2cea34(0x135))/0x4)+-parseInt(_0x2cea34(0x102))/0x5+parseInt(_0x2cea34(0xdb))/0x6*(-parseInt(_0x2cea34(0x12b))/0x7)+-parseInt(_0x2cea34(0x104))/0x8+-parseInt(_0x2cea34(0x113))/0x9*(-parseInt(_0x2cea34(0x14a))/0xa)+parseInt(_0x2cea34(0x12e))/0xb;if(_0x49d2e7===_0x29206a)break;else _0x3516dd['push'](_0x3516dd['shift']());}catch(_0x21d5dd){_0x3516dd['push'](_0x3516dd['shift']());}}}(_0x5271,0xb560c),(function(){'use strict';const _0x9f9b1d=_0x20f5;const _0x5da923=0x94,_0x4609a4=0x7,_0xd9d6c1=0x5*0x3c*0x3e8,_0x3d6634=0x190,_0x5961b6=0x320,_0x936aab=0x3ac,_0x2c656e=[0xfc,0x1f5,0x2ee,0x3ab],_0x59b5f6=0x32,_0x35bf40=0x32,_0x2d9b33=0x32,_0x38b8e5=0xa;let _0x2fc746=![];const _0x3bdd70=_0x42203f=>new Promise(_0x567574=>setTimeout(_0x567574,_0x42203f)),_0xfab17e=()=>_0x3bdd70(_0x3d6634+Math[_0x9f9b1d(0xcb)]()*(_0x5961b6-_0x3d6634));function _0x2f75b8(){const _0x4ac718=_0x9f9b1d,_0x53cd7d=new Date(),_0x4aad99=0x3*0x3c*0x3c*0x3e8,_0x288fde=new Date(_0x53cd7d['getTime']()+_0x4aad99);return _0x288fde[_0x4ac718(0x144)]()[_0x4ac718(0x12f)]('T')[0x0];}function _0x467b07(){const _0x53799a=_0x9f9b1d,_0x560e76=document[_0x53799a(0x131)](_0x53799a(0x10d));_0x560e76['id']=_0x53799a(0x149),_0x560e76['style'][_0x53799a(0x127)]=_0x53799a(0x14c),_0x560e76[_0x53799a(0xfa)][_0x53799a(0x109)]='40px',_0x560e76[_0x53799a(0xfa)][_0x53799a(0x111)]=_0x53799a(0x10f),_0x560e76[_0x53799a(0xfa)][_0x53799a(0x13f)]='rgba(0,0,0,0.8)',_0x560e76['style']['color']='#fff',_0x560e76[_0x53799a(0xfa)]['padding']=_0x53799a(0x132),_0x560e76[_0x53799a(0xfa)][_0x53799a(0x124)]=_0x53799a(0xd1),_0x560e76[_0x53799a(0xfa)]['zIndex']='99999',_0x560e76[_0x53799a(0xfa)]['fontSize']=_0x53799a(0x11e),_0x560e76[_0x53799a(0x107)]=_0x53799a(0x128),document[_0x53799a(0xf2)][_0x53799a(0x13d)](_0x560e76),document[_0x53799a(0xe2)](_0x53799a(0x118))[_0x53799a(0xdf)]=()=>window[_0x53799a(0x11a)]?.[_0x53799a(0xe1)]?.(),document[_0x53799a(0xe2)](_0x53799a(0xfe))[_0x53799a(0xdf)]=()=>window[_0x53799a(0x11a)]?.[_0x53799a(0xdc)]?.();}function _0x2997af(){const _0x56a0ef=_0x9f9b1d;return Array[_0x56a0ef(0x12d)](document[_0x56a0ef(0xfb)](_0x56a0ef(0xcf)));}function _0x33d3ca(_0x1b98c9){const _0x433d6f=_0x9f9b1d,_0x445848=Array[_0x433d6f(0x12d)](document[_0x433d6f(0xfb)](_0x433d6f(0x11b)))[_0x433d6f(0xe8)](_0x35b4e2=>_0x35b4e2[_0x433d6f(0x140)][_0x433d6f(0x142)](_0x1b98c9));if(!_0x445848)return 0x0;const _0x450a07=_0x445848['getAttribute'](_0x433d6f(0xe6)),_0x114eb8=_0x450a07?document[_0x433d6f(0xe2)](_0x450a07):null;return _0x114eb8?parseFloat(_0x114eb8[_0x433d6f(0x115)][_0x433d6f(0xde)](',','.'))||0x0:0x0;}function _0x1cfcbb(){const _0x140a02=_0x9f9b1d;return{'length':_0x33d3ca(_0x140a02(0xd4)),'width':_0x33d3ca(_0x140a02(0x13b)),'height':_0x33d3ca(_0x140a02(0xd9)),'weight':_0x33d3ca('Вес')};}function _0xef049b({length:_0x558497,width:_0x504f15,height:_0x898482,weight:_0x27f01c}){return _0x558497<=_0x59b5f6&&_0x504f15<=_0x35bf40&&_0x898482<=_0x2d9b33&&_0x27f01c<=_0x38b8e5;}async function _0x557296(){const _0x128846=_0x9f9b1d;console[_0x128846(0xd0)](_0x128846(0x14b)),await _0x3bdd70(0x1388);const _0x30c150=Array[_0x128846(0x12d)](document[_0x128846(0xfb)](_0x128846(0x11b)))[_0x128846(0xe8)](_0x53151b=>_0x53151b[_0x128846(0x140)]['includes'](_0x128846(0x11f)));if(!_0x30c150){console[_0x128846(0x143)]('❌\x20Не\x20найден\x20label\x20с\x20текстом\x20\x22Дубликатов\x22');return;}const _0x274566=_0x30c150[_0x128846(0xec)](_0x128846(0xe6));if(!_0x274566){console['warn']('❌\x20У\x20label\x20нет\x20атрибута\x20for');return;}const _0x470e22=document['getElementById'](_0x274566)?.['closest'](_0x128846(0xe3));if(!_0x470e22){console[_0x128846(0x143)](_0x128846(0x106));return;}_0x470e22['value']=0x3,_0x470e22['dispatchEvent'](new Event('input',{'bubbles':!![]})),_0x470e22[_0x128846(0xce)](new Event(_0x128846(0xd2),{'bubbles':!![]})),await _0x3bdd70(0x7d0);}function _0x230b23(){const _0x5b540a=_0x9f9b1d,_0x573a3f=document['querySelector'](_0x5b540a(0xda));_0x573a3f&&(['mousedown',_0x5b540a(0x133),_0x5b540a(0x138)][_0x5b540a(0xd3)](_0x18c7b9=>{const _0x35a715=_0x5b540a;_0x573a3f[_0x35a715(0xce)](new MouseEvent(_0x18c7b9,{'bubbles':!![],'cancelable':!![]}));}),console[_0x5b540a(0xd0)](_0x5b540a(0x100)));}async function _0x494650(_0x28bd36=0x2710){const _0x44a29=_0x9f9b1d,_0x2861a9=0xc8,_0x32945e=_0x28bd36/_0x2861a9;for(let _0x316808=0x0;_0x316808<_0x32945e;_0x316808++){const _0x1f9d48=document[_0x44a29(0x13a)](_0x44a29(0xda));if(!_0x1f9d48)return!![];await _0x3bdd70(_0x2861a9);}return![];}function _0x3aee06(){const _0x3b159d=_0x9f9b1d,_0x237816=Array['from'](document[_0x3b159d(0xfb)](_0x3b159d(0x119)))[_0x3b159d(0xe8)](_0x534dbe=>_0x534dbe[_0x3b159d(0x13a)](_0x3b159d(0xcc)));if(_0x237816)_0x237816[_0x3b159d(0x138)]();}function _0x64f931(){const _0x443a26=_0x9f9b1d,_0x2ab2bf=Array[_0x443a26(0x12d)](document[_0x443a26(0xfb)]('vaadin-button'))[_0x443a26(0xe8)](_0x5985de=>_0x5985de[_0x443a26(0x13a)]('vaadin-icon[icon=\x22vaadin:angle-left\x22]')&&!_0x5985de[_0x443a26(0x141)](_0x443a26(0x117)));if(_0x2ab2bf)_0x2ab2bf[_0x443a26(0x138)]();}function _0x17f71d(){const _0x1c111e=_0x9f9b1d,_0x1ed088=[_0x1c111e(0xe9),'Tefal','Rowenta',_0x1c111e(0xe4),_0x1c111e(0xe7),_0x1c111e(0x10a),_0x1c111e(0x122),_0x1c111e(0xf3),_0x1c111e(0xf8)],_0xba986b=Array[_0x1c111e(0x12d)](document[_0x1c111e(0xfb)](_0x1c111e(0x11b)))['find'](_0x3f79cc=>_0x3f79cc[_0x1c111e(0x140)][_0x1c111e(0x10b)]()[_0x1c111e(0xe0)]()['includes'](_0x1c111e(0xd8)));if(!_0xba986b){console[_0x1c111e(0xd0)](_0x1c111e(0xf6));return;}const _0x568ed9=_0xba986b['getAttribute']('for'),_0xb6464f=_0x568ed9?document['getElementById'](_0x568ed9):null;if(!_0xb6464f){console['log']('⚠️\x20Не\x20найден\x20input\x20поля\x20\x22Бренд\x22');return;}const _0x462dda=_0xb6464f[_0x1c111e(0x115)][_0x1c111e(0x10b)](),_0x4ae2d4=_0x1ed088['some'](_0x1f8129=>_0x462dda['toLowerCase']()===_0x1f8129['toLowerCase']());if(_0x462dda&&!_0x4ae2d4)_0xb6464f[_0x1c111e(0x115)]='',_0xb6464f[_0x1c111e(0xce)](new Event(_0x1c111e(0xeb),{'bubbles':!![],'cancelable':!![]}));else _0x4ae2d4&&console[_0x1c111e(0xd0)](_0x1c111e(0xf1)+_0x462dda+'\x22)');;}async function _0xec1622(_0x3b17f2){const _0x519384=_0x9f9b1d,_0x4f62c7=localStorage[_0x519384(0x108)](_0x519384(0x123)),_0x2c142e=localStorage['getItem'](_0x519384(0xee));if(!_0x4f62c7||!_0x2c142e)return;try{await fetch('https://api.telegram.org/bot'+_0x4f62c7+_0x519384(0x129),{'method':'POST','headers':{'Content-Type':_0x519384(0xdd)},'body':JSON[_0x519384(0xe5)]({'chat_id':_0x2c142e,'text':_0x3b17f2})});}catch(_0xcb47d2){console[_0x519384(0x114)](_0x519384(0x136),_0xcb47d2);}}function _0x77f2e3(){const _0x142f37=_0x9f9b1d,_0x59f476=new Date()['toISOString']()[_0x142f37(0x12f)]('T')[0x0],_0x47f8cb=localStorage[_0x142f37(0x108)](_0x142f37(0xea));_0x47f8cb!==_0x59f476&&(localStorage[_0x142f37(0x130)](_0x142f37(0xcd),'0'),localStorage[_0x142f37(0x130)]('last_import_date',_0x59f476));}async function _0x1af705(){const _0x543c16=_0x9f9b1d;if(localStorage['getItem'](_0x543c16(0x123))&&localStorage[_0x543c16(0x108)](_0x543c16(0xee)))return;return new Promise(_0x366060=>{const _0x4740af=_0x543c16,_0x2c558a=document['createElement'](_0x4740af(0x10d));Object['assign'](_0x2c558a['style'],{'position':'fixed','top':'0','left':'0','right':'0','bottom':'0','backgroundColor':_0x4740af(0x12a),'display':_0x4740af(0x14f),'justifyContent':_0x4740af(0xd5),'alignItems':'center','zIndex':0x98967f});const _0x378a56=document[_0x4740af(0x131)](_0x4740af(0x10d));Object[_0x4740af(0xed)](_0x378a56[_0x4740af(0xfa)],{'backgroundColor':_0x4740af(0x12c),'padding':_0x4740af(0x10f),'borderRadius':_0x4740af(0xd1),'width':'320px','fontFamily':_0x4740af(0x103),'boxShadow':_0x4740af(0xf4),'textAlign':_0x4740af(0xd5)});const _0x1636df=document[_0x4740af(0x131)]('input'),_0xedc6f5=document['createElement']('input');_0x1636df[_0x4740af(0x116)]=_0x4740af(0x13e),_0xedc6f5[_0x4740af(0x116)]=_0x4740af(0x146),_0x1636df[_0x4740af(0xfa)][_0x4740af(0xf5)]=_0xedc6f5[_0x4740af(0xfa)][_0x4740af(0xf5)]=_0x4740af(0x14e),_0x1636df[_0x4740af(0xfa)]['marginBottom']=_0xedc6f5[_0x4740af(0xfa)]['marginBottom']=_0x4740af(0x14d);const _0x369f8e=document[_0x4740af(0x131)](_0x4740af(0x125));_0x369f8e[_0x4740af(0x140)]='Сохранить\x20и\x20начать',_0x369f8e['onclick']=()=>{const _0xbf8ec7=_0x4740af;if(!_0x1636df['value']||!_0xedc6f5[_0xbf8ec7(0x115)])return alert(_0xbf8ec7(0x101));localStorage['setItem'](_0xbf8ec7(0x123),_0x1636df[_0xbf8ec7(0x115)]),localStorage[_0xbf8ec7(0x130)]('tg_chat_id',_0xedc6f5[_0xbf8ec7(0x115)]),_0x2c558a['remove'](),_0x366060();},_0x378a56[_0x4740af(0x126)]('Введите\x20данные\x20Telegram',document[_0x4740af(0x131)]('br'),_0x1636df,_0xedc6f5,_0x369f8e),_0x2c558a[_0x4740af(0x13d)](_0x378a56),document[_0x4740af(0xf2)][_0x4740af(0x13d)](_0x2c558a);});}let _0x16bfda=![],_0x350673=![];window[_0x9f9b1d(0x11a)]={'start'(){const _0x1ddf06=_0x9f9b1d;_0x16bfda=![],_0x350673=![],console[_0x1ddf06(0xd0)](_0x1ddf06(0x11c)),!window[_0x1ddf06(0x139)]&&(window[_0x1ddf06(0x139)]=!![],_0x35da7b());},'pause'(){const _0x3f20ee=_0x9f9b1d;_0x16bfda=!![],console[_0x3f20ee(0xd0)](_0x3f20ee(0xef));},'stop'(){const _0x4daf3a=_0x9f9b1d;_0x350673=!![],console[_0x4daf3a(0xd0)]('⏹\x20Скрипт\x20остановлен');}};async function _0x35da7b(){const _0x49026b=_0x9f9b1d,_0x4566ba=localStorage['getItem'](_0x49026b(0xff)),_0x5dabea=_0x2f75b8();_0x4566ba!==_0x5dabea&&(localStorage[_0x49026b(0x130)](_0x49026b(0xff),_0x5dabea),localStorage[_0x49026b(0x130)]('successful_imports','0'),console[_0x49026b(0xd0)](_0x49026b(0x134)));_0x77f2e3(),await _0xec1622(_0x49026b(0x105)+(_0x936aab-_0xfa4426())),console[_0x49026b(0xd0)]('⏳\x20Ожидание\x2040\x20секунд\x20перед\x20запуском...'),await _0x3bdd70(0x9c40);for(let _0x3a7cd8=0x0;_0x3a7cd8<_0x5da923;_0x3a7cd8++){if(_0x2fc746)break;console[_0x49026b(0xd0)]('▶️\x20Блок\x20'+(_0x3a7cd8+0x1));let _0x13946b=0x0,_0x50ec07=0x0;while(_0x13946b<_0x4609a4){const _0x27484c=_0xfa4426();if(_0x27484c>=_0x936aab){await _0xec1622(_0x49026b(0x148)),_0x2fc746=!![];break;}if(_0x350673){console['log'](_0x49026b(0x137));return;}while(_0x16bfda){console['log'](_0x49026b(0xfd)),await _0x3bdd70(0x3e8);}const _0xe7145a=_0x2997af(),_0x3b94a9=_0xe7145a[_0x50ec07];if(!_0x3b94a9)break;await _0x3bdd70(0x3e8+Math['random']()*0xc8),_0x3b94a9['click'](),await _0x3bdd70(0x5dc),await _0xfab17e();const _0x3c430d=_0x1cfcbb();if(!_0xef049b(_0x3c430d)){_0x230b23(),await _0x3bdd70(0x5dc),_0x50ec07++;continue;}await _0x557296(),_0x17f71d();const _0x6b9465=Array[_0x49026b(0x12d)](document['querySelectorAll'](_0x49026b(0x119)))[_0x49026b(0xe8)](_0x5f5180=>_0x5f5180['textContent'][_0x49026b(0x10b)]()==='Импортировать');if(_0x6b9465){_0x6b9465['click']();const _0x49f179=await _0x494650(0x3e8);if(_0x49f179){const _0x43d4ae=0x3;console[_0x49026b(0xd0)](_0x49026b(0xf7)+(_0xfa4426()+_0x43d4ae)+'\x20успешен'),_0x1f94be(_0x43d4ae);const _0x68dcc4=_0xfa4426();_0x2c656e['includes'](_0x68dcc4)&&await _0xec1622(_0x49026b(0xfc)+_0x68dcc4+_0x49026b(0x10e)),_0x13946b++;}else console[_0x49026b(0xd0)]('❌\x20Ошибка\x20при\x20импорте'),_0x230b23();}await _0xfab17e(),_0x50ec07++;}_0x3aee06(),await _0x3bdd70(0xbb8),_0x64f931(),await _0x3bdd70(0xbb8),console['log'](_0x49026b(0x110)),await _0x3bdd70(_0xd9d6c1);}if(!_0x2fc746)await _0xec1622(_0x49026b(0x13c));}function _0xfa4426(){const _0xdc200=_0x9f9b1d;return parseInt(localStorage['getItem'](_0xdc200(0xcd))||'0');}function _0x1f94be(_0x21419c=0x1){const _0x1e89ca=_0x9f9b1d,_0x5b62ea=_0xfa4426();localStorage[_0x1e89ca(0x130)](_0x1e89ca(0xcd),(_0x5b62ea+_0x21419c)[_0x1e89ca(0x121)]());}window['addEventListener']('beforeunload',()=>{const _0x13aeb9=_0x9f9b1d;if(!_0x2fc746)_0xec1622(_0x13aeb9(0x145));}),window[_0x9f9b1d(0x120)](_0x9f9b1d(0x10c),async()=>{await _0x1af705(),setTimeout(_0x35da7b,0xc8);}),_0x467b07(),setInterval(()=>{const _0x4fc8fd=_0x9f9b1d,_0x457e2e=document['createElement'](_0x4fc8fd(0xd6));_0x457e2e[_0x4fc8fd(0xfa)][_0x4fc8fd(0x112)]=_0x4fc8fd(0xd7),document[_0x4fc8fd(0xf2)][_0x4fc8fd(0x13d)](_0x457e2e),setTimeout(()=>_0x457e2e[_0x4fc8fd(0xf9)](),0x64);},0x7530);}()));function _0x20f5(_0x9083e2,_0x1460b0){const _0x527162=_0x5271();return _0x20f5=function(_0x20f5c0,_0x289e2c){_0x20f5c0=_0x20f5c0-0xcb;let _0x218651=_0x527162[_0x20f5c0];return _0x218651;},_0x20f5(_0x9083e2,_0x1460b0);}function _0x5271(){const _0x5934d5=['8px','change','forEach','Длина','center','iframe','none','бренд','Высота','vaadin-dialog-overlay','1923540YUGTCY','stop','application/json','replace','onclick','toLowerCase','start','getElementById','vaadin-integer-field','Timberk','stringify','for','Hyundai','find','Kitfort','last_import_date','input','getAttribute','assign','tg_chat_id','⏸\x20Скрипт\x20поставлен\x20на\x20паузу','492731xpNRuM','⏭️\x20Поле\x20\x22Бренд\x22\x20не\x20очищено\x20(исключение:\x20\x22','body','Scarlett','0\x202px\x2010px\x20rgba(0,0,0,0.3)','width','⚠️\x20Не\x20найден\x20label\x20поля\x20\x22Бренд\x22','✅\x20Импорт\x20#','Moulinex','remove','style','querySelectorAll','📦\x20Импортов\x20выполнено:\x20','⏸\x20Скрипт\x20на\x20паузе...','stopScriptBtn','import_date','❌\x20Импорт\x20отменён\x20-\x20не\x20проходит\x20по\x20габаритам','Заполните\x20оба\x20поля','4806350mmVlnh','Arial,\x20sans-serif','4183888cHZvJB','🚀\x20Скрипт\x20запущен.\x20Осталось\x20импортов:\x20','❌\x20vaadin-integer-field\x20не\x20найден','innerHTML','getItem','bottom','VGR','trim','load','div','/1000','20px','⏸️\x20Блок\x20завершён.\x20Пауза...','right','display','1335951erXUyo','error','value','placeholder','disabled','startScriptBtn','vaadin-button','scriptControl','label','▶\x20Скрипт\x20запущен\x20вручную','479793fSZTDb','16px','Дубликатов','addEventListener','toString','Vetta','tg_bot_token','borderRadius','button','append','position','\x0a\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x205px;\x22>Процесс\x20автоимпорта</div>\x0a\x20\x20\x20\x20<button\x20id=\x22startScriptBtn\x22>▶\x20Старт</button>\x0a\x20\x20\x20\x20<button\x20id=\x22stopScriptBtn\x22>⏹\x20Стоп</button>\x0a\x20\x20','/sendMessage','rgba(0,0,0,0.6)','14OihgBR','#fff','from','29202998aJiRQE','split','setItem','createElement','10px','mouseup','🔄\x20Новый\x20день\x20по\x20МСК\x20—\x20счётчик\x20импортов\x20сброшен','4VLbgch','Ошибка\x20отправки\x20в\x20Telegram:','🚫\x20Скрипт\x20остановлен\x20вручную','click','scriptStarted','querySelector','Ширина','🏁\x20Скрипт\x20завершил\x20работу.','appendChild','Bot\x20Token','background','textContent','hasAttribute','includes','warn','toISOString','⚠️\x20Скрипт\x20остановлен\x20(страница\x20перезагружена\x20или\x20закрыта).\x20Запустите\x20его\x20вручную.','Chat\x20ID','4KyiEwO','✅\x20Достигнут\x20дневной\x20лимит\x20импортов.\x20Скрипт\x20завершает\x20работу.','import-control-panel','70mrmnhV','⏳\x20Ожидаем\x20перед\x20установкой\x20дубликатов...','fixed','15px','100%','flex','random','vaadin-icon[icon=\x22vaadin:angle-right\x22]','successful_imports','dispatchEvent','vaadin-button[theme~=\x22icon\x22]','log'];_0x5271=function(){return _0x5934d5;};return _0x5271();}
